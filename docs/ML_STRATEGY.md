# Chalk ML 전략 기획서

## 🎯 핵심 차별화

> **콴다**: "정답은 3이야"  
> **열품타**: "5시간 공부했어"  
> **Chalk**: "음수 이항에서 계속 틀려. 다음 시험 전에 이거 복습해!"

---

## 🚀 발전된 "취약점 분석" 시스템

### Level 1: 단순 태깅 (기본)
```
"이항 규칙 취약" 🏷️
```

### Level 2: 패턴 분석 (심화)
```
📊 너의 오류 패턴:
- 이항 규칙: 4번 틀림 (이번 주)
- 특히 "음수 이항"에서 자주 틀림
- 비슷한 친구들: @민수 @지훈
```

### Level 3: 예측 + 추천 (차별화!)
```
⚠️ 다음 시험에서 조심해야 할 것:
1. 음수 이항 (틀릴 확률 78%)
2. 분수 통분 (틀릴 확률 65%)

📝 추천 복습 문제: [링크]
```

---

## 🧠 ML 모델 설계

### 모델 1: 오류 패턴 클러스터링

**목적**: 비슷한 오류를 묶어서 패턴 도출

**입력**: 
```
지난 2주간 틀린 문제들
```

**출력**: 
```
오류 패턴 그룹 (3~5개)
- "음수 처리 패턴" (부호 관련 오류 묶음)
- "계산 실수 패턴" (덧셈/뺄셈 착오)
- "개념 혼동 패턴" (공식 잘못 적용)
```

**기술 스택**:
- TF-IDF + K-Means 클러스터링
- 사전 정의 취약 영역 30~50개로 매핑

**학습 데이터**:
- AI Hub 수학 풀이 데이터 (45,000+ 오답)

---

### 모델 2: 다음 오류 예측

**목적**: 학생이 다음에 틀릴 유형 예측

**입력**: 
```
학생의 오류 히스토리 + 다음 시험 단원
```

**출력**: 
```
틀릴 가능성 높은 유형 TOP 3
1. 음수 이항 (78%)
2. 분수 통분 (65%)
3. 등식 성질 (42%)
```

**기술 스택**:
- **시계열 예측**: 오류 패턴의 시간적 변화
- **협업 필터링**: "비슷한 오류 패턴 가진 학생들이 이걸 많이 틀림"

**학습 데이터**:
- 서비스 운영 후 수집되는 사용자 히스토리
- 초기: AI Hub 데이터로 시뮬레이션

---

### 모델 3: 그룹 분석

**목적**: 그룹 내 공통 취약점 도출

**입력**: 
```
그룹 내 모든 학생의 오류 데이터
```

**출력**: 
```
- 같이 틀린 문제
- 그룹 전체 취약점
- "이 그룹은 분수에 약해요"
```

**기술 스택**:
- 집합 교집합 분석
- 빈도 기반 가중치 계산

---

## 🎮 게이미피케이션 요소

> 열품타 성공 요인: **랭킹 + 경쟁**

### 성장왕 랭킹

```
🏆 이번 주 성장왕

1. @예진 - 부호 실수 80% 감소! 
2. @민수 - 분수 연산 마스터 달성!
3. @지훈 - 연속 7일 인증 스트릭!
```

### 그룹 vs 전국 비교

```
👥 우리 그룹 vs 전국

- 이항 규칙: 상위 30% (개선 중! 📈)
- 분수 연산: 상위 60% (더 노력! �)
- 방정식: 상위 15% (잘하고 있어! 🎉)
```

### 배지 시스템

| 배지 | 조건 |
|------|------|
| 🔥 스트릭 마스터 | 7일 연속 인증 |
| 📈 성장왕 | 특정 오류 50%+ 감소 |
| 🎯 정확도 달인 | 주간 정답률 90%+ |
| 👥 팀플레이어 | 그룹 복습 세션 참여 |
| 🏆 전국 상위권 | 특정 영역 상위 20% |

---

## �📊 ML 모델 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│  학생 풀이 이미지                                         │
└─────────────────────┬───────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────────────────┐
│  1️⃣ Gemini Vision (OCR)                                 │
│  역할: 손글씨 → 텍스트 변환                               │
└─────────────────────┬───────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────────────────┐
│  2️⃣ 채점 엔진                                            │
│  역할: 정답 비교, 오류 위치 특정                          │
└─────────────────────┬───────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────────────────┐
│  3️⃣ 오류 패턴 클러스터링 (자체 ML)                        │
│  역할: Level 1 태깅 + Level 2 패턴 분석                  │
└─────────────────────┬───────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────────────────┐
│  4️⃣ 예측 엔진 (자체 ML)                                  │
│  역할: Level 3 예측 + 추천                               │
└─────────────────────┬───────────────────────────────────┘
                      ▼
┌─────────────────────────────────────────────────────────┐
│  5️⃣ 그룹 분석 + 게이미피케이션                           │
│  역할: 랭킹, 배지, 그룹 비교                              │
└─────────────────────────────────────────────────────────┘
```

---

## 📋 취약 영역 태그 체계 (한국 교과과정)

```
수학 - 중등
├── 수와 연산
│   ├── 정수_사칙연산
│   ├── 분수_통분
│   ├── 분수_사칙연산
│   ├── 소수_연산
│   └── 음수_처리
├── 문자와 식
│   ├── 이항_규칙
│   ├── 음수_이항 ⬅️ 세분화
│   ├── 등식_성질
│   ├── 일차방정식
│   ├── 연립방정식
│   └── 부등식
├── 함수
│   ├── 좌표_이해
│   ├── 기울기_계산
│   └── 그래프_해석
└── 도형
    ├── 각도_계산
    ├── 넓이_공식
    └── 피타고라스
```

---

## 🗂️ 데이터 전략

### OCR 선택: Gemini Vision ✅

| 항목 | 수치 | 판정 |
|------|------|------|
| 깨끗한 손글씨 | 84% | ✅ 충분 |
| 지저분한 손글씨 | ~70% | ⚠️ 재촬영 안내 |
| 수학 공식 인식 | 80-90% | ✅ 좋음 |
| Fermat 벤치마크 (오류 교정) | 77% | ✅ 최고 수준 |

**→ 자체 OCR 개발 불필요, Gemini 사용**

---

### 학습용 데이터셋 (AI Hub)

| 데이터셋 | 규모 | 용도 |
|----------|------|------|
| **수학 과목 자동 풀이** | 180,000+ 손글씨 | ⭐ 핵심 - 패턴 클러스터링 |
| **수학 교과 문제 풀이과정** | 20,319건 | 2022 개정 교육과정 |
| **수학 과목 문제 생성** | 84,000+ | 문제+모범답안 |

---

### 추천 복습 문제 소스 (저작권 OK)

| 소스 | 저작권 | 활용 |
|------|--------|------|
| **EBS Math** | 공공재 | 🔗 링크 연결 |
| **모두매쓰** | AI 생성 | API 연동 검토 |
| **Khan Academy** | CC-BY-NC-SA | 비영리 OK |

**→ 1순위: EBS Math 링크 연결**

---

### ToS 준수

```
✅ 사용 가능:
- AI Hub 공개 데이터 (사람 라벨링)
- 사용자 "맞아요" 확인 데이터

❌ 사용 불가:
- Gemini 라벨로 경쟁 모델 직접 학습
```

---

## 📅 개발 로드맵

| Phase | 기간 | 내용 | Level |
|-------|------|------|-------|
| **MVP** | Week 1-4 | Gemini OCR + 기본 분석 | Level 1 |
| **패턴** | Week 5-6 | 오류 패턴 클러스터링 | Level 2 |
| **그룹** | Week 7-8 | 그룹 분석 + 게이미피케이션 | - |
| **예측** | Month 2~ | 다음 오류 예측 | Level 3 |

---

## 📈 성공 지표

| 지표 | MVP | 3개월 | 6개월 |
|------|-----|-------|-------|
| 오류 분류 정확도 | 70% | 80% | 85% |
| 예측 정확도 | - | 60% | 75% |
| 주간 리포트 열람률 | 30% | 50% | 70% |
| 성장왕 배지 획득률 | - | 20% | 40% |

---

## 🔒 기존 모델 정리

```
🗑️ 삭제:
- copy_detector.pkl
- error_classifier.pkl (초기 버전)
- unified_* 시리즈
- map_* 시리즈
- 중복 korean_*_all, korean_*_full

✅ 유지:
- eedi_classifier_v2.pkl (참고용)
- korean_error_classifier.pkl (베이스라인)

🆕 새로 만들기:
- chalk_pattern_clusterer.pkl (Level 2)
- chalk_weakness_tagger.pkl (Level 1)
- chalk_predictor.pkl (Level 3)
- chalk_group_analyzer.pkl (그룹 분석)
```
