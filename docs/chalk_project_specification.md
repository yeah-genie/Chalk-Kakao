# Chalk: AI-Powered Tutoring Analytics Platform
## í”„ë¡œì íŠ¸ ì¢…í•© ê¸°ìˆ  ëª…ì„¸ì„œ v1.0

> **"Unfakeable Portfolio"** - íŠœí„°ì˜ ì‹¤ì œ ìˆ˜ì—… ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê²€ì¦ ê°€ëŠ¥í•œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ìë™ ìƒì„±í•˜ëŠ” í”„ë¦¬ë¯¸ì—„ íŠœí„°ë§ ë¶„ì„ í”Œë«í¼

---

## ğŸ“Œ 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í•µì‹¬ ê°€ì¹˜ ì œì•ˆ
ChalkëŠ” ê°œì¸ ê³¼ì™¸ íŠœí„°ë¥¼ ìœ„í•œ **AI ê¸°ë°˜ ìˆ˜ì—… ë¶„ì„ ë° í•™ìƒ ì„±ì¥ ì¶”ì  í”Œë«í¼**ì…ë‹ˆë‹¤.

| ë¬¸ì œì  | Chalkì˜ í•´ê²°ì±… |
|--------|---------------|
| íŠœí„°ê°€ ìì‹ ì˜ ì—­ëŸ‰ì„ ì¦ëª…í•˜ê¸° ì–´ë ¤ì›€ | ì‹¤ì œ ìˆ˜ì—… ë°ì´í„° ê¸°ë°˜ì˜ "ìœ„ì¡° ë¶ˆê°€ëŠ¥
í•œ" í¬íŠ¸í´ë¦¬ì˜¤ ìë™ ìƒì„± |
| í•™ìƒ ì§„ë„ íŒŒì•…ì´ ì£¼ê´€ì  | AIê°€ ìˆ˜ì—… ë…¹ìŒì„ ë¶„ì„í•˜ì—¬ ê°ê´€ì ì¸ ì„±ì·¨ë„ ì¸¡ì • |
| í•™ë¶€ëª¨ ì†Œí†µì— ì‹œê°„ ì†Œëª¨ | ìë™í™”ëœ í•™ë¶€ëª¨ ë¦¬í¬íŠ¸ ìƒì„± ë° ë°œì†¡ |
| ë³µìŠµ íƒ€ì´ë° ë†“ì¹¨ | ë§ê° ê³¡ì„  ê¸°ë°˜ ë³µìŠµ ì•Œë¦¼ ì‹œìŠ¤í…œ |

### 1.2 ê¸°ìˆ  ìŠ¤íƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND                              â”‚
â”‚  Next.js 16 (App Router) + TypeScript + Tailwind CSS    â”‚
â”‚  D3.js (ë°ì´í„° ì‹œê°í™”) + Lucide React (ì•„ì´ì½˜)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND                               â”‚
â”‚  Next.js Server Actions + Supabase (PostgreSQL + Auth)  â”‚
â”‚  Supabase Storage (ì˜¤ë””ì˜¤/ì´ë¯¸ì§€ ì €ì¥)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI SERVICES                           â”‚
â”‚  OpenAI Whisper API (ìŒì„±â†’í…ìŠ¤íŠ¸)                        â”‚
â”‚  Google Gemini 1.5 Flash (ë©€í‹°ëª¨ë‹¬ ë¶„ì„)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT                            â”‚
â”‚  Vercel (ìë™ ë°°í¬) + GitHub (ì†ŒìŠ¤ ê´€ë¦¬)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ 2. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
chalk-web/
â”œâ”€â”€ app/                           # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx                   # ëœë”© í˜ì´ì§€
â”‚   â”œâ”€â”€ login/page.tsx             # ë¡œê·¸ì¸ (Magic Link)
â”‚   â”œâ”€â”€ auth/callback/route.ts     # OAuth ì½œë°±
â”‚   â””â”€â”€ dashboard/                 # ëŒ€ì‹œë³´ë“œ (ì¸ì¦ í•„ìš”)
â”‚       â”œâ”€â”€ page.tsx               # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚       â”œâ”€â”€ students/              # í•™ìƒ ê´€ë¦¬
â”‚       â”‚   â”œâ”€â”€ page.tsx           # í•™ìƒ ëª©ë¡
â”‚       â”‚   â”œâ”€â”€ student-list.tsx   # í•™ìƒ ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â””â”€â”€ [id]/              # í•™ìƒ ìƒì„¸
â”‚       â”‚       â”œâ”€â”€ page.tsx       # ì„œë²„ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚       â””â”€â”€ StudentDetailClient.tsx  # í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ sessions/page.tsx      # ì„¸ì…˜ ëª©ë¡
â”‚       â”œâ”€â”€ analysis/page.tsx      # ì „ì²´ í•™ìƒ ì¸ì‚¬ì´íŠ¸
â”‚       â”œâ”€â”€ knowledge/page.tsx     # AI Taxonomy ê´€ë¦¬
â”‚       â””â”€â”€ settings/page.tsx      # ì„¤ì •
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/Sidebar.tsx         # ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”œâ”€â”€ monitoring/VoiceRecorder.tsx  # ë…¹ìŒ + ì´ë¯¸ì§€ ì—…ë¡œë“œ
â”‚   â”œâ”€â”€ insights/
â”‚   â”‚   â”œâ”€â”€ PredictionPanel.tsx    # AI ì˜ˆì¸¡ íŒ¨ë„
â”‚   â”‚   â”œâ”€â”€ PredictionSkeleton.tsx # ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤
â”‚   â”‚   â””â”€â”€ LearningTrendChart.tsx # D3.js ì‹œê³„ì—´ ì°¨íŠ¸
â”‚   â”œâ”€â”€ sessions/
â”‚   â”‚   â””â”€â”€ InteractiveTranscript.tsx  # ì˜¤ë””ì˜¤ ë™ê¸°í™” ì „ì‚¬
â”‚   â””â”€â”€ analysis/TopicInsightPanel.tsx # í† í”½ë³„ ì¸ì‚¬ì´íŠ¸
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ actions/                   # Server Actions
â”‚   â”‚   â”œâ”€â”€ crud.ts                # DB CRUD ì‘ì—…
â”‚   â”‚   â”œâ”€â”€ analysis.ts            # AI ë¶„ì„ íŒŒì´í”„ë¼ì¸
â”‚   â”‚   â”œâ”€â”€ taxonomy.ts            # Taxonomy ìŠ¹ì¸/ê±°ì ˆ
â”‚   â”‚   â””â”€â”€ reports.ts             # í•™ë¶€ëª¨ ë¦¬í¬íŠ¸ ìƒì„±
â”‚   â”œâ”€â”€ services/                  # ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
â”‚   â”‚   â”œâ”€â”€ whisper.ts             # OpenAI Whisper STT
â”‚   â”‚   â”œâ”€â”€ gemini.ts              # Google Gemini API
â”‚   â”‚   â””â”€â”€ prediction.ts          # ì˜ˆì¸¡ ì—”ì§„
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”œâ”€â”€ client.ts              # ë¸Œë¼ìš°ì € í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ server.ts              # ì„œë²„ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ types/database.ts          # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ knowledge-graph.ts         # AP êµìœ¡ê³¼ì • ë°ì´í„°
â”‚
â””â”€â”€ supabase/
    â”œâ”€â”€ schema.sql                 # ì½”ì–´ ìŠ¤í‚¤ë§ˆ
    â””â”€â”€ migrations/
        â”œâ”€â”€ 20240101_v3_full_schema.sql    # KB í…Œì´ë¸”
        â”œâ”€â”€ 20240101_v3_rls_fix.sql        # RLS ì •ì±…
        â””â”€â”€ 20240102_p2_security_hardening.sql  # ë³´ì•ˆ ê°•í™”
```

---

## ğŸ—„ï¸ 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 3.1 í•µì‹¬ í…Œì´ë¸”

```sql
-- ì‚¬ìš©ì í”„ë¡œí•„ (Supabase Auth ì—°ë™)
CREATE TABLE profiles (
    id UUID PRIMARY KEY REFERENCES auth.users(id),
    full_name TEXT,
    avatar_url TEXT,
    role TEXT DEFAULT 'tutor',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- í•™ìƒ
CREATE TABLE students (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tutor_id UUID NOT NULL REFERENCES profiles(id),
    name TEXT NOT NULL,
    subject_id TEXT,
    parent_email TEXT,
    notes TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ìˆ˜ì—… ì„¸ì…˜
CREATE TABLE sessions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    student_id UUID REFERENCES students(id),
    tutor_id UUID REFERENCES profiles(id),
    scheduled_at TIMESTAMPTZ,
    status TEXT DEFAULT 'scheduled',  -- scheduled/completed/cancelled
    transcript TEXT,                   -- Whisper ì „ì‚¬ ê²°ê³¼
    transcript_segments JSONB,         -- íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ ì„¸ê·¸ë¨¼íŠ¸
    notes TEXT,                        -- AI ìƒì„± ìš”ì•½
    audio_url TEXT,
    evidence_urls TEXT[],              -- ë©€í‹°ëª¨ë‹¬ ì´ë¯¸ì§€ URLs
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì„¸ì…˜-í† í”½ ì—°ê²° (ì–´ë–¤ í† í”½ì„ ë‹¤ë¤˜ëŠ”ì§€)
CREATE TABLE session_topics (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    session_id UUID REFERENCES sessions(id),
    topic_id TEXT NOT NULL,
    status_before TEXT,
    status_after TEXT,
    evidence TEXT,
    future_impact TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- í•™ìƒë³„ í† í”½ ìˆ™ë ¨ë„
CREATE TABLE student_mastery (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    student_id UUID REFERENCES students(id),
    topic_id TEXT NOT NULL,
    score INTEGER DEFAULT 0,
    status TEXT DEFAULT 'new',  -- new/learning/reviewed/mastered
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 3.2 ì§€ì‹ ë² ì´ìŠ¤ í…Œì´ë¸” (KB)

```sql
-- êµìœ¡ê³¼ì • ê³„ì¸µ: Board > Subject > Module > Unit > Topic
CREATE TABLE kb_boards (id UUID, name TEXT, code TEXT);
CREATE TABLE kb_subjects (id UUID, board_id UUID, name TEXT, code TEXT);
CREATE TABLE kb_modules (id UUID, subject_id UUID, name TEXT, code TEXT);
CREATE TABLE kb_units (id UUID, module_id UUID, name TEXT, code TEXT);
CREATE TABLE kb_topics (id UUID, unit_id UUID, name TEXT, code TEXT);

-- AIê°€ ì œì•ˆí•œ ìƒˆ í† í”½ (íŠœí„° ìŠ¹ì¸ ëŒ€ê¸°)
CREATE TABLE kb_proposed_taxonomy (
    id UUID PRIMARY KEY,
    session_id UUID REFERENCES sessions(id),
    proposed_type TEXT,           -- 'unit' ë˜ëŠ” 'topic'
    proposed_name TEXT,
    proposed_parent_id TEXT,
    ai_rationale TEXT,
    status TEXT DEFAULT 'pending' -- pending/approved/rejected
);
```

### 3.3 Row Level Security (RLS)

```sql
-- íŠœí„°ëŠ” ìì‹ ì˜ í•™ìƒë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Tutors can only see their students"
ON students FOR ALL
USING (tutor_id = auth.uid());

-- ì„¸ì…˜ë„ ë™ì¼í•˜ê²Œ ì œí•œ
CREATE POLICY "Tutors can only see their sessions"
ON sessions FOR ALL
USING (tutor_id = auth.uid());

-- Storage: recordings ë²„í‚·ì€ íŠœí„°ë³„ í´ë”ë¡œ ë¶„ë¦¬
CREATE POLICY "Tutors can upload to their folder"
ON storage.objects FOR INSERT
WITH CHECK (
    bucket_id = 'recordings' 
    AND (storage.foldername(name))[1] = auth.uid()::text
);
```

---

## ğŸ¤– 4. AI ë¶„ì„ íŒŒì´í”„ë¼ì¸

### 4.1 ì „ì²´ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VoiceRecorder  â”‚ â†’ â”‚   Whisper   â”‚ â†’ â”‚   Gemini    â”‚ â†’ â”‚   Database  â”‚
â”‚  (ë…¹ìŒ+ì´ë¯¸ì§€) â”‚   â”‚   (STT)     â”‚   â”‚  (ë¶„ì„)     â”‚   â”‚   (ì €ì¥)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Whisper í†µí•© (`lib/services/whisper.ts`)

```typescript
export async function transcribeAudio(audioBlob: Blob): Promise<{
    text: string;
    segments: Array<{ start: number; end: number; text: string }>;
}> {
    const formData = new FormData();
    formData.append('file', audioBlob, 'audio.webm');
    formData.append('model', 'whisper-1');
    formData.append('response_format', 'verbose_json');
    formData.append('timestamp_granularities[]', 'segment');

    const response = await fetch('https://api.openai.com/v1/audio/transcriptions', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${OPENAI_API_KEY}` },
        body: formData
    });

    const result = await response.json();
    return {
        text: result.text,
        segments: result.segments.map(s => ({
            start: s.start,
            end: s.end,
            text: s.text
        }))
    };
}
```

### 4.3 Gemini ë©€í‹°ëª¨ë‹¬ ë¶„ì„ (`lib/services/gemini.ts`)

```typescript
import { GoogleGenerativeAI } from "@google/generative-ai";

export async function extractTopicsFromTranscript(
    transcript: string,
    subjectId: string,
    existingTopics: Topic[],
    images: MultimodalImage[] = []
): Promise<ExtractionResult> {
    const genAI = new GoogleGenerativeAI(GEMINI_API_KEY);
    const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

    const prompt = `
    You are an expert educational analyst. Analyze this tutoring session.
    
    SUBJECT: ${subjectId}
    TRANSCRIPT: ${transcript}
    EXISTING TOPICS: ${JSON.stringify(existingTopics)}
    
    Return JSON with:
    1. topicsDiscussed: Which existing topics were covered
    2. masteryAssessment: Student's understanding level (0-100)
    3. suggestedNewNodes: Any topics not in existing curriculum
    4. summary: 2-3 sentence session overview
    `;

    const result = await model.generateContent([prompt, ...images]);
    return JSON.parse(result.response.text());
}
```

### 4.4 ì˜ˆì¸¡ ì—”ì§„ (`lib/services/prediction.ts`)

```typescript
// Ebbinghaus ë§ê° ê³¡ì„  ê¸°ë°˜ ì ìˆ˜ ì˜ˆì¸¡
function calculateRetention(initialScore: number, daysSince: number): number {
    const stability = 1 + (initialScore / 100) * 6;
    return Math.exp(-daysSince / stability);
}

export async function getStudentPredictions(studentId: string): Promise<PredictionData> {
    // 1. í˜„ì¬ ìˆ™ë ¨ë„ ì¡°íšŒ
    // 2. ì‹œê°„ ê²½ê³¼ì— ë”°ë¥¸ ê¸°ì–µ ê°í‡´ ì˜ˆì¸¡
    // 3. ë³µìŠµ í•„ìš” í† í”½ ì‹ë³„ (critical/warning)
    // 4. ë‹¤ìŒ ì„¸ì…˜ ì¶”ì²œ í† í”½ ê²°ì •
    // 5. ì•½ì  íŒ¨í„´ ë¶„ì„ (stuck, declining, slow_progress)
    
    return {
        nextSessionRecommendation: { topicId, topicName, reason },
        retentionAlerts: [...],
        progressForecast: { currentMastery, targetMastery, estimatedSessions },
        weaknessPatterns: [...]
    };
}
```

---

## ğŸ¨ 5. ì£¼ìš” UI ì»´í¬ë„ŒíŠ¸

### 5.1 VoiceRecorder (ë…¹ìŒ + ì´ë¯¸ì§€ ì—…ë¡œë“œ)

```tsx
// í•µì‹¬ ìƒíƒœ
const [isRecording, setIsRecording] = useState(false);
const [audioBlob, setAudioBlob] = useState<Blob | null>(null);
const [images, setImages] = useState<File[]>([]);  // ìµœëŒ€ 3ì¥
const [selectedStudentId, setSelectedStudentId] = useState<string>();

// ë…¹ìŒ ì‹œì‘/ì¤‘ì§€
const handleRecord = async () => {
    if (isRecording) {
        recorder.stop();  // Blob ìƒì„±
    } else {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        recorder = new MediaRecorder(stream);
        recorder.start();
    }
};

// ë¶„ì„ ì‹¤í–‰
const handleAnalyze = async () => {
    const formData = new FormData();
    formData.append('audio', audioBlob);
    formData.append('studentId', selectedStudentId);
    formData.append('imageCount', images.length.toString());
    images.forEach((img, i) => formData.append(`image_${i}`, img));
    
    await processSessionAudio(formData);
};
```

### 5.2 InteractiveTranscript (ì˜¤ë””ì˜¤ ë™ê¸°í™”)

```tsx
interface TranscriptSegment {
    start: number;
    end: number;
    text: string;
}

export default function InteractiveTranscript({ 
    segments, 
    audioUrl 
}: Props) {
    const audioRef = useRef<HTMLAudioElement>(null);
    const [currentTime, setCurrentTime] = useState(0);

    // í˜„ì¬ ì¬ìƒ êµ¬ê°„ í•˜ì´ë¼ì´íŠ¸
    const activeSegmentIndex = segments.findIndex(
        s => currentTime >= s.start && currentTime < s.end
    );

    // í´ë¦­ ì‹œ í•´ë‹¹ ì‹œì ìœ¼ë¡œ ì´ë™
    const handleSegmentClick = (startTime: number) => {
        if (audioRef.current) {
            audioRef.current.currentTime = startTime;
        }
    };

    return (
        <div>
            <audio ref={audioRef} src={audioUrl} onTimeUpdate={...} />
            {segments.map((segment, i) => (
                <span
                    key={i}
                    className={i === activeSegmentIndex ? 'bg-emerald-500/30' : ''}
                    onClick={() => handleSegmentClick(segment.start)}
                >
                    {segment.text}
                </span>
            ))}
        </div>
    );
}
```

### 5.3 LearningTrendChart (D3.js ì‹œê³„ì—´)

```tsx
export default function LearningTrendChart({ history }: Props) {
    const svgRef = useRef<SVGSVGElement>(null);

    useEffect(() => {
        const svg = d3.select(svgRef.current);
        
        // Scales
        const xScale = d3.scaleTime()
            .domain(d3.extent(history, d => new Date(d.date)))
            .range([0, width]);
        
        const yScale = d3.scaleLinear()
            .domain([0, 100])
            .range([height, 0]);

        // Line + Area
        const line = d3.line()
            .x(d => xScale(new Date(d.date)))
            .y(d => yScale(d.score))
            .curve(d3.curveMonotoneX);

        svg.append('path')
            .datum(history)
            .attr('d', line)
            .attr('fill', 'none')
            .attr('stroke', '#10b981');
            
        // ì„±ì  í•˜ë½ ê°ì§€ â†’ Alert í‘œì‹œ
        detectPerformanceDrops(history);
    }, [history]);

    return <svg ref={svgRef} />;
}
```

### 5.4 PredictionPanel (AI ì˜ˆì¸¡ íŒ¨ë„)

ì£¼ìš” ì„¹ì…˜:
1. **Recommended Focus**: ë‹¤ìŒ ì„¸ì…˜ì— ë‹¤ë£° ìµœìš°ì„  í† í”½
2. **Adaptive Roadmap**: ë‹¨ê³„ë³„ í•™ìŠµ ê²½ë¡œ (í˜„ì¬ â†’ ë‹¤ìŒ â†’ ìµœì¢… ëª©í‘œ)
3. **Progress Forecast**: ìˆ™ë ¨ë„ ì§„ë„ ë°” + ì˜ˆìƒ ì„¸ì…˜ ìˆ˜
4. **Retention Alerts**: ë§ê° ìœ„í—˜ í† í”½ ë¦¬ìŠ¤íŠ¸
5. **Weakness Analysis**: ì •ì²´/í•˜ë½ íŒ¨í„´ ê°ì§€

---

## ğŸ” 6. ì¸ì¦ ë° ë³´ì•ˆ

### 6.1 Supabase Auth (Magic Link)

```typescript
// ë¡œê·¸ì¸ ìš”ì²­
const { error } = await supabase.auth.signInWithOtp({
    email,
    options: { emailRedirectTo: `${origin}/auth/callback` }
});

// ì½œë°± ì²˜ë¦¬
export async function GET(request: Request) {
    const { searchParams } = new URL(request.url);
    const code = searchParams.get('code');
    
    if (code) {
        const supabase = await createServerSupabaseClient();
        await supabase.auth.exchangeCodeForSession(code);
    }
    
    return NextResponse.redirect(new URL('/dashboard', request.url));
}
```

### 6.2 ë¯¸ë“¤ì›¨ì–´ ë³´í˜¸

```typescript
// middleware.ts
export async function middleware(request: NextRequest) {
    const supabase = createMiddlewareClient({ req, res });
    const { data: { session } } = await supabase.auth.getSession();

    if (request.nextUrl.pathname.startsWith('/dashboard') && !session) {
        return NextResponse.redirect(new URL('/login', request.url));
    }
}
```

---

## ğŸš€ 7. ë°°í¬ (Vercel)

### 7.1 í™˜ê²½ ë³€ìˆ˜

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbG...
SUPABASE_SERVICE_ROLE_KEY=eyJhbG...

OPENAI_API_KEY=sk-...
GEMINI_API_KEY=AIza...
```

### 7.2 ë¹Œë“œ ëª…ë ¹ì–´

```bash
npm run build   # Next.js í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run lint    # ESLint ê²€ì‚¬
```

---

## ğŸ’¡ 8. ë‹¤ìŒ ê³ ë„í™” ë°©í–¥ ì œì•ˆ

### Option A: í•™ìƒ ë°ì´í„° ë¶„ì„ ì‹¬í™” ğŸ“Š

**ê·¼ê±°**: íŠœí„°/í•™ë¶€ëª¨ ëŒ€ìƒ ë¦¬ì„œì¹˜ ê²°ê³¼, ê°€ì¥ ì›í•˜ëŠ” ì¸ì‚¬ì´íŠ¸

| ê¸°ëŠ¥ | ì„¤ëª… | ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ |
|------|------|--------------|
| **ğŸ¯ ë§ˆìŠ¤í„°ë¦¬ ì˜ˆìƒ ì‹œê°„** | "í˜„ì¬ ì£¼ 2íšŒ ìˆ˜ì—… ê¸°ì¤€, ë¯¸ì ë¶„ ë§ˆìŠ¤í„°ê¹Œì§€ ì•½ 4ê°œì›” ì†Œìš” ì˜ˆìƒ" | í•™ë¶€ëª¨ì—ê²Œ ëª…í™•í•œ íƒ€ì„ë¼ì¸ ì œì‹œ â†’ ì‹ ë¢°ë„ â†‘ |
| **âš ï¸ ì¡°ê¸° ê²½ê³  ì‹œìŠ¤í…œ** | 3íšŒ ì—°ì† ê°™ì€ ê°œë…ì—ì„œ ë§‰íˆë©´ íŠœí„°ì—ê²Œ ì•Œë¦¼ | ë¬¸ì œê°€ ì»¤ì§€ê¸° ì „ ê°œì… ê°€ëŠ¥ |
| **ğŸ’° ì„¸ì…˜ ROI ë¶„ì„** | "ì§€ë‚œ 10íšŒ ìˆ˜ì—…ì—ì„œ ì„±ì  15% í–¥ìƒ, ì„¸ì…˜ë‹¹ í‰ê·  1.5% ìƒìŠ¹" | íŠœí„° ê°€ì¹˜ ì¦ëª… â†’ ê°€ê²© ì •ë‹¹í™” |
| **ğŸ“Š í•™ìŠµ íš¨ìœ¨ ë²¤ì¹˜ë§ˆí¬** | "í‰ê·  í•™ìƒì€ ì´ ë‹¨ì›ì— 8ì‹œê°„ í•„ìš”, ì´ í•™ìƒì€ 6ì‹œê°„ ë§Œì— ì™„ë£Œ" | í•™ìƒ ê°•ì  ë°œê²¬ ë° ë™ê¸°ë¶€ì—¬ |
| **ğŸ”„ ë³µìŠµ ì£¼ê¸° ìµœì í™”** | Ebbinghaus ê³¡ì„  ê¸°ë°˜ "3ì¼ í›„, 7ì¼ í›„, 21ì¼ í›„" ë³µìŠµ ìŠ¤ì¼€ì¤„ ìë™ ì œì•ˆ | ì¥ê¸° ê¸°ì–µ ì •ì°©ë¥  í–¥ìƒ |
| **ğŸ“ˆ í•™ë¶€ëª¨ ë¦¬í¬íŠ¸ ìë™í™”** | ë§¤ì£¼ "ì´ë²ˆ ì£¼ ë°°ìš´ ê²ƒ / ì˜í•œ ì  / ë‹¤ìŒ ì£¼ ëª©í‘œ" AI ìš”ì•½ ë°œì†¡ | í•™ë¶€ëª¨ ì†Œí†µ ì‹œê°„ 90% ì ˆê° |

**êµ¬í˜„ ìš°ì„ ìˆœìœ„ (Quick Wins)**:
1. **ë§ˆìŠ¤í„°ë¦¬ ì˜ˆìƒ ì‹œê°„** - ì´ë¯¸ ìˆëŠ” ì„¸ì…˜ ë°ì´í„°ë¡œ ê³„ì‚° ê°€ëŠ¥
2. **ì¡°ê¸° ê²½ê³  ì‹œìŠ¤í…œ** - `session_topics` í…Œì´ë¸” ë¶„ì„ìœ¼ë¡œ êµ¬í˜„
3. **í•™ë¶€ëª¨ ë¦¬í¬íŠ¸** - Gemini APIë¡œ ìš”ì•½ ìƒì„± í›„ ì´ë©”ì¼ ë°œì†¡

### Option B: UI/UX ì •êµí™” ğŸ¨

**ì¥ì **: ì²«ì¸ìƒì—ì„œ í”„ë¦¬ë¯¸ì—„ ëŠë‚Œ, ì‚¬ìš©ì ì²´ë¥˜ ì‹œê°„ ì¦ê°€

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ë§ˆì´í¬ë¡œ ì¸í„°ë™ì…˜** | ë²„íŠ¼ í˜¸ë²„, ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜, ë¡œë”© íŠ¸ëœì§€ì…˜ |
| **ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ** | ì‹œìŠ¤í…œ ì„¤ì • ì—°ë™ + ìˆ˜ë™ í† ê¸€ |
| **ëª¨ë°”ì¼ ìµœì í™”** | íƒœë¸”ë¦¿ì—ì„œ ìˆ˜ì—… ì¤‘ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ |
| **ì»¤ìŠ¤í…€ ëŒ€ì‹œë³´ë“œ** | ìœ„ì ¯ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë°°ì¹˜ |
| **ì˜¤ë””ì˜¤ ì›¨ì´ë¸Œí¼** | ë…¹ìŒ ì¤‘ ì‹¤ì‹œê°„ íŒŒí˜• ì‹œê°í™” |

### ğŸ† ë‚˜ì˜ ì¶”ì²œ: **Option A + B í•˜ì´ë¸Œë¦¬ë“œ**

> **"Data Storytelling"** ì ‘ê·¼ë²•

ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ë” ë¶„ì„í•˜ê±°ë‚˜ UIë¥¼ ì˜ˆì˜ê²Œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤, **ë°ì´í„°ë¥¼ ìŠ¤í† ë¦¬ë¡œ ì „ë‹¬í•˜ëŠ”** ë°©ì‹ì´ ê°€ì¥ ì„íŒ©íŠ¸ê°€ í½ë‹ˆë‹¤.

**êµ¬ì²´ì  ì œì•ˆ**:

1. **í•™ìƒ ì„±ì¥ ìŠ¤í† ë¦¬ ìƒì„±ê¸°**
   - AIê°€ í•œ í•™ìƒì˜ 6ê°œì›” ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ "ì„±ì¥ ìŠ¤í† ë¦¬" ë‚´ëŸ¬í‹°ë¸Œ ìë™ ìƒì„±
   - "ì¤€ì„œëŠ” ì²˜ìŒ ë¯¸ì ë¶„ì—ì„œ ì–´ë ¤ì›€ì„ ê²ªì—ˆì§€ë§Œ, 3ê°œì›”ê°„ì˜ ì§‘ì¤‘ ë³µìŠµìœ¼ë¡œ..."
   - í•™ë¶€ëª¨ì—ê²Œ ê³µìœ  ê°€ëŠ¥í•œ ë¹„ì£¼ì–¼ ë¦¬í¬íŠ¸

2. **íŠœí„° í¬íŠ¸í´ë¦¬ì˜¤ ìë™ ìƒì„±**
   - ëª¨ë“  í•™ìƒì˜ ì„±ì¥ ë°ì´í„°ë¥¼ ì§‘ê³„í•˜ì—¬ íŠœí„°ì˜ "ì„±ê³¼ ì¹´ë“œ" ìƒì„±
   - "í‰ê·  ì„±ì  í–¥ìƒ 23%", "ë³µìŠµ ë¦¬ë§ˆì¸ë” ì¤€ìˆ˜ìœ¨ 89%"
   - ìƒˆ í•™ìƒ ëª¨ì§‘ ì‹œ ë§í¬ë¡œ ê³µìœ  ê°€ëŠ¥

3. **ì¸í„°ë™í‹°ë¸Œ íƒ€ì„ë¼ì¸**
   - í•™ìƒ ìƒì„¸ í˜ì´ì§€ì— ê°€ë¡œ ìŠ¤í¬ë¡¤ íƒ€ì„ë¼ì¸
   - ê° ì„¸ì…˜ì´ ì¹©ìœ¼ë¡œ í‘œì‹œë˜ê³ , í˜¸ë²„í•˜ë©´ ê·¸ë‚ ì˜ í•µì‹¬ ì¸ì‚¬ì´íŠ¸
   - ì„±ì  ë³€í™”ì™€ ì´ë²¤íŠ¸ë¥¼ ì‹œê°ì ìœ¼ë¡œ ì—°ê²°

ì´ ì ‘ê·¼ë²•ì€:
- ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì—†ì´ë„ **íŠœí„°ê°€ ìì‹ ì„ ë§ˆì¼€íŒ…í•  ë¬´ê¸°**ê°€ ë¨
- ë°ì´í„° ë¶„ì„ì˜ ê²°ê³¼ë¬¼ì´ **ëˆˆì— ë³´ì´ëŠ” ê°€ì¹˜**ë¡œ ì „í™˜ë¨
- UI/UX ê°œì„ ì´ **ëª©ì  ìˆëŠ” ê°œì„ **ì´ ë¨

---

## ğŸ“‹ 9. í™˜ê²½ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

ìƒˆë¡œ ì‹œì‘í•  ê²½ìš°:

- [ ] Node.js 18+ ì„¤ì¹˜
- [ ] `npm install` ì‹¤í–‰
- [ ] Supabase í”„ë¡œì íŠ¸ ìƒì„± ë° URL/í‚¤ ì„¤ì •
- [ ] `supabase/schema.sql` ì‹¤í–‰
- [ ] `supabase/migrations/*.sql` ìˆœì„œëŒ€ë¡œ ì‹¤í–‰
- [ ] OpenAI API í‚¤ ë°œê¸‰
- [ ] Google AI Studioì—ì„œ Gemini API í‚¤ ë°œê¸‰
- [ ] Vercel í”„ë¡œì íŠ¸ ì—°ê²° ë° í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- [ ] `npm run dev`ë¡œ ë¡œì»¬ í…ŒìŠ¤íŠ¸
- [ ] `git push`ë¡œ ìë™ ë°°í¬

---

*ë¬¸ì„œ ì‘ì„±ì¼: 2026-01-02*
*ìµœì¢… ì»¤ë°‹: `a7edb51`*
